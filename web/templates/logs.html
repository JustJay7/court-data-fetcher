{{define "content"}}
<div class="row">
    <div class="col-12">
        <div class="card shadow">
            <div class="card-header bg-primary text-white">
                <h4 class="mb-0">
                    <i class="bi bi-clock-history"></i> Query Logs
                </h4>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Query Time</th>
                                <th>Case Details</th>
                                <th>Status</th>
                                <th>IP Address</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            {{range .logs}}
                            <tr>
                                <td>{{.ID}}</td>
                                <td>{{.QueryTime.Format "02-01-2006 15:04:05"}}</td>
                                <td>
                                    <small>
                                        <strong>Type:</strong> {{.CaseType}}<br>
                                        <strong>Number:</strong> {{.CaseNumber}}<br>
                                        <strong>Year:</strong> {{.FilingYear}}
                                    </small>
                                </td>
                                <td>
                                    {{if .Success}}
                                        <span class="badge bg-success">Success</span>
                                    {{else}}
                                        <span class="badge bg-danger">Failed</span>
                                        {{if .ErrorMessage}}
                                            <br><small class="text-muted">{{.ErrorMessage}}</small>
                                        {{end}}
                                    {{end}}
                                </td>
                                <td>{{.IPAddress}}</td>
                                <td>
                                    <div class="btn-group btn-group-sm" role="group">
                                        <a href="/api/logs/{{.ID}}/raw" target="_blank" class="btn btn-outline-primary" title="View Raw HTML">
                                            <i class="bi bi-code"></i>
                                        </a>
                                        {{if .Success}}
                                        <a href="/results/{{.ID}}" class="btn btn-outline-success" title="View Results">
                                            <i class="bi bi-eye"></i>
                                        </a>
                                        {{end}}
                                    </div>
                                </td>
                            </tr>
                            {{end}}
                        </tbody>
                    </table>
                </div>
                
                {{if .pagination}}
                <nav aria-label="Page navigation">
                    <ul class="pagination justify-content-center">
                        {{if gt .pagination.page 1}}
                        <li class="page-item">
                            <a class="page-link" href="?page={{.pagination.prevPage}}">Previous</a>
                        </li>
                        {{end}}
                        
                        <li class="page-item active">
                            <span class="page-link">
                                Page {{.pagination.page}} of {{.pagination.totalPages}}
                            </span>
                        </li>
                        
                        {{if lt .pagination.page .pagination.totalPages}}
                        <li class="page-item">
                            <a class="page-link" href="?page={{.pagination.nextPage}}">Next</a>
                        </li>
                        {{end}}
                    </ul>
                </nav>
                {{end}}
            </div>
        </div>
    </div>
</div>
{{end}}